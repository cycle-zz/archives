<html>
	<head>
		<title>Branch - API Documentation</title>
		<link HREF="style.css" REL="stylesheet" TYPE="text/css">
	</head>
	<body>
		<div width="100%" height="40px" class="banner">
			Visualizer - API Documentation
		</div>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Image.cpp</h1><a href="Image_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "<a class="code" href="DataTypes_8h.html">DataTypes.h</a>"</span>
00002 <span class="preprocessor">#include "<a class="code" href="Image_8h.html">Image.h</a>"</span>
00003 <span class="preprocessor">#include "<a class="code" href="Color_8h.html">Color.h</a>"</span>
00004 <span class="preprocessor">#include &lt;memory&gt;</span>
00005 
00006 <span class="keyword">using</span> <span class="keyword">namespace </span>dg;
00007 
00008 <span class="comment">//******************************************************************************</span>
<a name="l00009"></a><a class="code" href="classdg_1_1Image.html#a0">00009</a> Image::Image(<a class="code" href="namespacedg.html#a15">UInt</a> uiWidth, <a class="code" href="namespacedg.html#a15">UInt</a> uiHeight, <a class="code" href="namespacedg.html#a15">UInt</a> uiChannels, <span class="keyword">const</span> <a class="code" href="classdg_1_1Color.html">Color</a>&amp; rkClearColor)
00010     : m_kClearColor(rkClearColor),
00011           m_uiWidth(uiWidth),
00012           m_uiHeight(uiHeight),
00013           m_uiChannels(uiChannels),
00014           m_afPixels(NULL)
00015 {
00016         <span class="keywordflow">if</span>(m_uiWidth &gt; 0 &amp;&amp; m_uiHeight &gt; 0 &amp;&amp; m_uiChannels &gt; 0)
00017         {
00018                 m_uiResolution = m_uiWidth * m_uiHeight * m_uiChannels;
00019                 m_afPixels = <span class="keyword">new</span> <a class="code" href="namespacedg.html#a28">Real</a>[ m_uiResolution ];
00020 
00021                 <a class="code" href="namespacedg.html#a15">UInt</a> uiIndex = 0;
00022                 <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiY = 0; uiY &lt; m_uiHeight; uiY++)
00023                         <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiX = 0; uiX &lt; m_uiWidth; uiX++)
00024                                 <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiC = 0; uiC &lt; m_uiChannels; uiC++)
00025                                         m_afPixels[uiIndex++] = m_kClearColor[uiC];
00026         }
00027 }
00028 <span class="comment">//******************************************************************************</span>
<a name="l00029"></a><a class="code" href="classdg_1_1Image.html#a1">00029</a> Image::~Image()
00030 {
00031     <span class="keyword">delete</span>[] m_afPixels;
00032         m_afPixels = NULL;
00033 }
00034 <span class="comment">//******************************************************************************</span>
<a name="l00035"></a><a class="code" href="classdg_1_1Image.html#a22">00035</a> <span class="keywordtype">void</span> Image::resize(     
00036         <a class="code" href="namespacedg.html#a15">UInt</a> uiWidth, <a class="code" href="namespacedg.html#a15">UInt</a> uiHeight, <a class="code" href="namespacedg.html#a15">UInt</a> uiChannels)
00037 {
00038         m_uiWidth = uiWidth;
00039         m_uiHeight = uiHeight;
00040         m_uiChannels = uiChannels;
00041         m_uiResolution = m_uiWidth * m_uiHeight * m_uiChannels;
00042                 
00043         <span class="keyword">delete</span>[] m_afPixels;
00044         m_afPixels = NULL;
00045         
00046         <span class="keywordflow">if</span>(m_uiWidth &gt; 0 &amp;&amp; m_uiHeight &gt; 0 &amp;&amp; m_uiChannels &gt; 0)
00047         {
00048                 m_afPixels = <span class="keyword">new</span> <a class="code" href="namespacedg.html#a28">Real</a>[ m_uiResolution ];
00049                 
00050                 <a class="code" href="namespacedg.html#a15">UInt</a> uiIndex = 0;
00051                 <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiY = 0; uiY &lt; m_uiHeight; uiY++)
00052                         <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiX = 0; uiX &lt; m_uiWidth; uiX++)
00053                                 <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiC = 0; uiC &lt; m_uiChannels; uiC++)
00054                                         m_afPixels[uiIndex++] = m_kClearColor[uiC];
00055         }
00056 }
00057 <span class="comment">//******************************************************************************</span>
<a name="l00058"></a><a class="code" href="classdg_1_1Image.html#a23">00058</a> <span class="keywordtype">void</span> Image::blur()
00059 {
00060         <a class="code" href="namespacedg.html#a28">Real</a>* afBlur = <span class="keyword">new</span> <a class="code" href="namespacedg.html#a28">Real</a>[ m_uiResolution ];
00061         
00062     memcpy(afBlur, m_afPixels, m_uiResolution * <span class="keyword">sizeof</span>(<a class="code" href="namespacedg.html#a28">Real</a>));
00063 
00064     <span class="keywordflow">for</span> (<a class="code" href="namespacedg.html#a15">UInt</a> uiY = 1; uiY &lt; m_uiHeight-1; uiY++)
00065     {
00066         <span class="keywordflow">for</span> (<a class="code" href="namespacedg.html#a15">UInt</a> uiX = 1; uiX &lt; m_uiWidth-1; uiX++)
00067         {
00068                         <a class="code" href="namespacedg.html#a28">Real</a> afValues[ m_uiChannels ];
00069                         memset(afValues, 0, m_uiChannels * <span class="keyword">sizeof</span>(<a class="code" href="namespacedg.html#a28">Real</a>));
00070                         
00071                         <a class="code" href="namespacedg.html#a15">UInt</a> uiDR = m_uiChannels;
00072             <span class="keywordflow">for</span>(<a class="code" href="namespacedg.html#a15">UInt</a> uiDY = -uiDR; uiDY &lt;= uiDR; uiDY += uiDR)
00073             {
00074                 <span class="keywordflow">for</span> (<a class="code" href="namespacedg.html#a15">UInt</a> uiDX = -uiDR; uiDX &lt;= uiDR; uiDX += uiDR)
00075                                 {
00076                                         <span class="keywordflow">for</span>( <a class="code" href="namespacedg.html#a15">UInt</a> uiC = 0; uiC &lt; m_uiChannels; uiC++ )
00077                                                 afValues[uiC] += m_afPixels[(uiX+uiDX)+m_uiWidth*(uiY+uiDY) + uiC];
00078                                 }
00079             }
00080                         
00081                         <span class="keywordflow">for</span>( <a class="code" href="namespacedg.html#a15">UInt</a> uiC = 0; uiC &lt; m_uiChannels; uiC++ )
00082                                 afBlur[uiX+m_uiWidth*uiY + uiC] = afValues[uiC]/9.0f;
00083         }
00084     }
00085     memcpy(m_afPixels, afBlur, m_uiResolution * <span class="keyword">sizeof</span>(<a class="code" href="namespacedg.html#a28">Real</a>));
00086         <span class="keyword">delete</span>[] afBlur;
00087 }
00088 <span class="comment">//******************************************************************************</span>
00089 
</pre></div>		<div class="footer" width="100%">
		<hr>
			<a href="http://lyon-smith.org/">&copy; Derek Gerstmann - NCCA - Bournemouth University - 2004</a>
		</div>
		<br>
	</body>
</html>
