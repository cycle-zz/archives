<html>
	<head>
		<title>Branch - API Documentation</title>
		<link HREF="style.css" REL="stylesheet" TYPE="text/css">
	</head>
	<body>
		<div width="100%" height="40px" class="banner">
			Visualizer - API Documentation
		</div>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Shading.cpp</h1><a href="Shading_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#include "<a class="code" href="Shading_8h.html">Shading.h</a>"</span>
00002 
00003 <span class="keyword">using</span> <span class="keyword">namespace </span>dg;
00004 
00005 
00006 <span class="comment">//******************************************************************************</span>
<a name="l00007"></a><a class="code" href="namespacedg.html#a178">00007</a> <a class="code" href="namespacedg.html#a28">Real</a> <a class="code" href="namespacedg.html#a177">dg::RaySphere</a>(
00008         <span class="keyword">const</span> <a class="code" href="classdg_1_1Vector.html">Vector</a>&amp; rkPos, 
00009         <span class="keyword">const</span> <a class="code" href="classdg_1_1Vector.html">Vector</a>&amp; rkRayDir,
00010     <a class="code" href="namespacedg.html#a28">Real</a> fRadius, <a class="code" href="namespacedg.html#a28">Real</a> fEpsilon,
00011         <a class="code" href="namespacedg.html#a28">Real</a>&amp; rfT0, <a class="code" href="namespacedg.html#a28">Real</a>&amp; rfT1)
00012 {
00013         <a class="code" href="namespacedg.html#a28">Real</a> fEDotI = <a class="code" href="namespacedg.html#a182">Dot</a>( rkPos, rkRayDir );
00014         <a class="code" href="namespacedg.html#a28">Real</a> fEDotE = <a class="code" href="namespacedg.html#a182">Dot</a>( rkPos, rkPos );
00015         
00016     <a class="code" href="namespacedg.html#a28">Real</a> fB = 2.0 * fEDotI;
00017     <a class="code" href="namespacedg.html#a28">Real</a> fC = fEDotE - fRadius*fRadius;
00018         
00019     <a class="code" href="namespacedg.html#a28">Real</a> fDiscrim = fB*fB - 4.0 * fC;
00020     <a class="code" href="namespacedg.html#a28">Real</a> fSolutions = 0;
00021     <span class="keywordflow">if</span>(fDiscrim &gt; 0) 
00022         {   
00023                 <span class="comment">// two solutions</span>
00024                 fDiscrim = sqrt(fDiscrim);
00025                 rfT0 = (-fDiscrim - fB) / 2.0;
00026                 <span class="keywordflow">if</span>(rfT0 &gt; fEpsilon) 
00027                 {
00028                         rfT1 = (fDiscrim - fB) / 2.0;
00029                         fSolutions = 2;
00030                 } 
00031                 <span class="keywordflow">else</span> 
00032                 {
00033                         rfT0 = (fDiscrim - fB) / 2.0;
00034                         fSolutions = (rfT0 &gt; fEpsilon) ? 1 : 0;
00035                 }
00036     } 
00037         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fDiscrim == 0) 
00038         {  
00039                 <span class="comment">// one solution on the edge</span>
00040                 rfT0 = -fB/2.0;
00041                 fSolutions = (rfT0 &gt; fEpsilon) ? 1 : 0;
00042     } 
00043         <span class="keywordflow">else</span> 
00044         {                    
00045                 <span class="comment">// imaginary solution -&gt; no intersection</span>
00046                 fSolutions = 0;
00047     }
00048     <span class="keywordflow">return</span> fSolutions;
00049 }
00050 <span class="comment">//******************************************************************************</span>
<a name="l00051"></a><a class="code" href="namespacedg.html#a177">00051</a> <a class="code" href="namespacedg.html#a28">Real</a> <a class="code" href="namespacedg.html#a177">dg::RaySphere</a>(
00052         <a class="code" href="namespacedg.html#a28">Real</a> fEX, <a class="code" href="namespacedg.html#a28">Real</a> fEY, <a class="code" href="namespacedg.html#a28">Real</a> fEZ, 
00053         <a class="code" href="namespacedg.html#a28">Real</a> fIX, <a class="code" href="namespacedg.html#a28">Real</a> fIY, <a class="code" href="namespacedg.html#a28">Real</a> fIZ,
00054     <a class="code" href="namespacedg.html#a28">Real</a> fRadius, <a class="code" href="namespacedg.html#a28">Real</a> fEpsilon,
00055         <a class="code" href="namespacedg.html#a28">Real</a>&amp; rfT0, <a class="code" href="namespacedg.html#a28">Real</a>&amp; rfT1)
00056 {
00057         <a class="code" href="namespacedg.html#a28">Real</a> fEDotI = fEX * fIX + fEY * fIY + fEZ * fIZ;
00058         <a class="code" href="namespacedg.html#a28">Real</a> fEDotE = fEX * fEX + fEY * fEY + fEZ * fEZ;
00059         
00060     <a class="code" href="namespacedg.html#a28">Real</a> fB = 2.0 * fEDotI;
00061     <a class="code" href="namespacedg.html#a28">Real</a> fC = fEDotE - fRadius*fRadius;
00062         
00063     <a class="code" href="namespacedg.html#a28">Real</a> fDiscrim = fB*fB - 4.0 * fC;
00064     <a class="code" href="namespacedg.html#a28">Real</a> fSolutions = 0;
00065     <span class="keywordflow">if</span>(fDiscrim &gt; 0) 
00066         {   
00067                 <span class="comment">// two solutions</span>
00068                 fDiscrim = sqrt(fDiscrim);
00069                 rfT0 = (-fDiscrim - fB) / 2.0;
00070                 <span class="keywordflow">if</span>(rfT0 &gt; fEpsilon) 
00071                 {
00072                         rfT1 = (fDiscrim - fB) / 2.0;
00073                         fSolutions = 2;
00074                 } 
00075                 <span class="keywordflow">else</span> 
00076                 {
00077                         rfT0 = (fDiscrim - fB) / 2.0;
00078                         fSolutions = (rfT0 &gt; fEpsilon) ? 1 : 0;
00079                 }
00080     } 
00081         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fDiscrim == 0) 
00082         {  
00083                 <span class="comment">// one solution on the edge</span>
00084                 rfT0 = -fB/2.0;
00085                 fSolutions = (rfT0 &gt; fEpsilon) ? 1 : 0;
00086     } 
00087         <span class="keywordflow">else</span> 
00088         {                    
00089                 <span class="comment">// imaginary solution -&gt; no intersection</span>
00090                 fSolutions = 0;
00091     }
00092     <span class="keywordflow">return</span> fSolutions;
00093 }
00094 <span class="comment">//******************************************************************************</span>
00095 
</pre></div>		<div class="footer" width="100%">
		<hr>
			<a href="http://lyon-smith.org/">&copy; Derek Gerstmann - NCCA - Bournemouth University - 2004</a>
		</div>
		<br>
	</body>
</html>
