<html>
	<head>
		<title>SPARK: Stream Processing Abstraction and Rendering Toolkit</title>
		<link HREF="style.css" REL="stylesheet" TYPE="text/css">
	</head>
	<body>
		<div width="100%" height="40px" class="banner">
			Spark API Documentation
		</div>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>SpStreamOperator.cpp</h1><a href="SpStreamOperator_8cpp.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="preprocessor">#include "<a class="code" href="SpStreamOperator_8h.html">SpStreamOperator.h</a>"</span>
00002 <span class="preprocessor">#include "<a class="code" href="SpGlHeaders_8h.html">SpGlHeaders.h</a>"</span>
00003 
00004 <span class="keyword">using</span> <span class="keyword">namespace </span>Spark;
00005 
00006 <span class="comment">// -----------------------------------------------------------------------------</span>
<a name="l00007"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#a0">00007</a> <a class="code" href="classSpark_1_1SpStreamOperator.html#a0">SpStreamOperator::SpStreamOperator</a>()
00008     : <a class="code" href="classSpark_1_1SpStreamInput.html">SpStreamInput</a>(), <a class="code" href="classSpark_1_1SpStreamOutput.html">SpStreamOutput</a>()
00009 {
00010     <span class="comment">// EMPTY!</span>
00011 }
00012 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00013"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#a1">00013</a> <a class="code" href="classSpark_1_1SpStreamOperator.html#a1">SpStreamOperator::~SpStreamOperator</a>()
00014 {
00015     <span class="comment">// EMPTY!</span>
00016 }
00017 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00018"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#a2">00018</a> <span class="keywordtype">void</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#a2">SpStreamOperator::setInputStream</a>(<a class="code" href="classSpark_1_1SpStreamInput.html">SpStreamInput</a> * pkInputStream)
00019 {
00020     SpStreamOutput::setInputStream(pkInputStream);
00021     m_bHasChanged = <span class="keyword">true</span>;
00022 }
00023 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00024"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#a3">00024</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#a3">SpStreamOperator::hasChanged</a>()
00025 {
00026     <span class="keywordflow">if</span> (m_bHasChanged)
00027         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00028 
00029     <span class="keywordflow">if</span> (m_pkInputStream)
00030     {
00031         m_bHasChanged = m_pkInputStream-&gt;<a class="code" href="classSpark_1_1SpStreamInput.html#a2">hasChanged</a>();
00032     }
00033 
00034     <span class="keywordflow">return</span> m_bHasChanged;
00035 }
00036 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00037"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#a4">00037</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#a4">SpStreamOperator::sendOutputToBuffer</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>* pkBuffer, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a> *pkCopy)
00038 {
00039     <span class="keywordflow">if</span>(m_bHasChanged)
00040         <span class="keywordflow">return</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b0">compute</a>(pkBuffer, pkCopy);
00041 
00042     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00043 }
00044 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00045"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b0">00045</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b0">SpStreamOperator::compute</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>* pkBuffer, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a> *pkCopy)
00046 {
00047     <span class="keywordtype">bool</span> bSuccess = <span class="keyword">true</span>;
00048 
00049     <span class="comment">// Activate the output steam, if necessary</span>
00050     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b1">enableOutputStream</a>(pkBuffer, pkCopy))
00051         bSuccess = <span class="keyword">false</span>;
00052 
00053     <span class="comment">// Set the necessary state for the stream operation</span>
00054     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b2">setupState</a>(pkBuffer, pkCopy))
00055         bSuccess = <span class="keyword">false</span>;
00056 
00057     <span class="comment">// Perform the stream operation</span>
00058     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b3">processStream</a>(pkBuffer, pkCopy))
00059         bSuccess = <span class="keyword">false</span>;
00060 
00061     <span class="comment">// Put the results of the operation into the output stream.</span>
00062     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b4">updateOutputStream</a>(pkBuffer, pkCopy))
00063         bSuccess = <span class="keyword">false</span>;
00064 
00065     <span class="comment">// Reset state</span>
00066     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b5">resetState</a>(pkBuffer, pkCopy))
00067         bSuccess = <span class="keyword">false</span>;
00068 
00069     <span class="comment">// Deactivate the output stream, if necessary</span>
00070     <span class="keywordflow">if</span>(!<a class="code" href="classSpark_1_1SpStreamOperator.html#b6">disableOutputStream</a>(pkBuffer, pkCopy))
00071         bSuccess = <span class="keyword">false</span>;
00072 
00073     <span class="keywordflow">return</span> bSuccess;
00074 }
00075 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00076"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b1">00076</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b1">SpStreamOperator::enableOutputStream</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00077 {
00078     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00079 }
00080 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00081"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b2">00081</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b2">SpStreamOperator::setupState</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00082 {
00083     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00084 }
00085 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00086"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b3">00086</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b3">SpStreamOperator::processStream</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00087 {
00088     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00089 }
00090 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00091"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b4">00091</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b4">SpStreamOperator::updateOutputStream</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00092 {
00093     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00094 }
00095 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00096"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b5">00096</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b5">SpStreamOperator::resetState</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00097 {
00098     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00099 }
00100 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00101"></a><a class="code" href="classSpark_1_1SpStreamOperator.html#b6">00101</a> <span class="keywordtype">bool</span> <a class="code" href="classSpark_1_1SpStreamOperator.html#b6">SpStreamOperator::disableOutputStream</a>(<a class="code" href="classSpark_1_1SpStreamBuffer.html">SpStreamBuffer</a>*, <a class="code" href="classSpark_1_1SpStreamFeedback.html">SpStreamFeedback</a>*)
00102 {
00103     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00104 }
00105 <span class="comment">//----------------------------------------------------------------------------</span>
</div></pre>		<div class="footer" width="100%">
		<hr>
			<a href="http://lyon-smith.org/">&copy; Derek Gerstmann - NCCA - Bournemouth University - 2004</a>
		</div>
		<br>
	</body>
</html>
